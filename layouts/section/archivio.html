{{ define "main" }}
<article class="markdown book-article archive-article">
  <h1>{{ .Title }}</h1>
  
  {{ .Content }}
  
  <div class="archive-list">
    {{ $pages := where .Site.Pages "Section" "docs" }}
    {{ $pages := where $pages "Kind" "page" }}
    {{ $pages := where $pages "Draft" false }}
    {{ $totalPages := len $pages }}
    {{ range $index, $page := ($pages.ByDate.Reverse) }}
      <div class="archive-entry">
        <a href="{{ $page.RelPermalink }}" class="archive-link">#{{ printf "%04d" (sub $totalPages $index) }} - {{ $page.Title }}</a>
      </div>
    {{ end }}
  </div>
</article>
{{ end }}
